# 🐍 彩色贪食蛇游戏

一个功能完整、视觉精美的HTML5 Canvas贪食蛇游戏，经过深度优化和bug修复。

![游戏状态](https://img.shields.io/badge/Status-Production%20Ready-brightgreen)
![技术栈](https://img.shields.io/badge/Tech-HTML5%20Canvas%20%7C%20Vanilla%20JavaScript%20%7C%20CSS3-blue)
![版本](https://img.shields.io/badge/Version-v3.0-orange)

## 🎮 游戏特色

### 🌈 视觉效果
- **彩色蛇身**: 七彩颜色循环（赤橙黄绿青蓝紫）
- **精美蛇头**: 黑色菱形造型，带有立体眼睛效果
- **动态食物**: 粉色和白色0.5秒交替闪烁的圆形食物，带光晕效果
- **明亮背景**: 浅灰色背景配淡色网格线，护眼舒适
- **优雅UI**: 深绿色得分显示，半透明白色背景，圆角设计

### ⚡ 游戏体验
- **优化速度**: 每秒移动5格，节奏紧凑不拖沓
- **紧凑地图**: 30x30网格（600x600px），减少"赶路"时间
- **智能暂停**: 空格键暂停/恢复，顶部智能提示切换
- **流畅操作**: 方向键控制，响应灵敏无延迟
- **完整流程**: 开始页面 → 倒计时 → 游戏 → 暂停 → 结束

### 🔧 技术亮点
- **状态机管理**: 五种状态（START/COUNTDOWN/PLAYING/PAUSED/GAME_OVER）
- **精确碰撞**: 修复了蛇尾碰撞bug，检测逻辑更准确
- **页面隔离**: UI元素只在正确的页面状态下显示
- **数据持久**: 最高分本地存储，永不丢失

## 🚀 快速开始

### 环境要求
- 现代浏览器（支持HTML5 Canvas和ES6+）
- HTTP服务器（不能直接打开HTML文件）

### 启动方法

#### 方法一：使用Node.js（推荐）
```bash
# 1. 安装live-server（如果未安装）
npm install -g live-server

# 2. 进入项目目录并启动
cd colorful-snake-1
npm run dev
# 或者
live-server src --port=8080 --open
```

#### 方法二：使用Python
```bash
# Python 3
cd colorful-snake-1/src
python -m http.server 8080

# Python 2
cd colorful-snake-1/src
python -m SimpleHTTPServer 8080

# 访问 http://localhost:8080
```

#### 方法三：使用其他HTTP服务器
```bash
# PHP
php -S localhost:8080

# Node.js http-server
npx http-server src -p 8080 -o
```

### 🎮 游戏控制
- **⬆️⬇️⬅️➡️ 方向键**: 控制蛇的移动方向
- **⏸️ 空格键**: 暂停/恢复游戏（仅在游戏进行时可用）
- **⏎ Enter键**: 在开始页面启动游戏
- **🖱️ 鼠标**: 点击"开始游戏"按钮

## 📁 项目结构

```
colorful-snake-1/
├── docs/                           # 📚 文档目录
│   ├── README.md                  # 项目说明
│   ├── 需求说明.md                # 详细需求文档
│   └── 项目诊断报告.md            # 问题诊断报告
├── src/                           # 💻 源代码目录
│   ├── index.html                 # 主游戏页面
│   ├── debug.html                 # 调试页面
│   ├── test.html                  # 测试页面
│   ├── css/
│   │   └── style.css              # 游戏样式文件
│   └── js/
│       ├── main.js                # 应用入口和页面管理
│       ├── Game.js                # 游戏核心逻辑
│       ├── Snake.js               # 蛇类（移动、碰撞、渲染）
│       ├── Food.js                # 食物类（生成、动画）
│       ├── Renderer.js            # Canvas渲染器
│       └── Storage.js             # 本地存储管理
├── package.json                   # 项目配置
├── package-lock.json             # 依赖锁定
└── LICENSE                       # 开源许可证
```

## 💻 技术架构

### 核心技术栈
- **HTML5 Canvas**: 高性能2D图形渲染
- **Vanilla JavaScript ES6+**: 纯原生JS，无框架依赖
- **CSS3**: 现代样式、动画和布局
- **localStorage**: 客户端数据持久化

### 设计模式
- **🏗️ 模块化设计**: 6个独立的JavaScript类
- **🎯 单一职责**: 每个模块负责特定功能
- **🔄 状态机模式**: 清晰的游戏状态管理
- **🎨 MVC架构**: 分离逻辑、渲染和数据

### 关键类说明
```javascript
GameApp     // 应用控制器，管理页面切换和事件
Game        // 游戏核心逻辑，状态管理和主循环
Snake       // 蛇对象，位置计算和碰撞检测
Food        // 食物对象，随机生成和颜色动画
Renderer    // 渲染器，Canvas绘制和视觉效果
Storage     // 存储管理，最高分持久化
```

## ✨ 版本更新

### v3.0 (当前版本)
**🔧 重大修复**
- ✅ 修复蛇自我碰撞检测bug（尾巴位置判断错误）
- ✅ 恢复并完善暂停功能
- ✅ 修复UI元素在错误页面显示的问题

**🎨 视觉优化**
- ✅ 调整游戏区域为30x30网格，更紧凑
- ✅ 明亮的浅灰色背景，护眼舒适
- ✅ 深绿色得分显示，半透明白色背景
- ✅ 深蓝色倒计时数字，清晰可见
- ✅ 智能暂停提示，根据状态切换文字

**⚡ 性能提升**
- ✅ 提升移动速度至每秒5格
- ✅ 优化渲染逻辑，减少不必要的绘制
- ✅ 改进页面状态管理，更精确的UI控制

### v2.0
- 🔨 修复核心游戏bug，临时移除暂停功能
- 🎮 优化游戏体验，调整速度和地图大小

### v1.0
- 🎉 基础功能实现，存在一些稳定性问题

## 🎯 游戏规则

### 基本规则
1. **控制蛇移动**: 使用方向键改变蛇的移动方向
2. **吃食物长大**: 蛇头碰到食物后，身体增长一节，得20分
3. **避免碰撞**: 不能撞墙或撞到自己的身体
4. **挑战高分**: 尽可能多地吃食物，挑战最高分记录

### 游戏流程
1. **开始页面**: 显示游戏标题、当前最高分和开始按钮
2. **倒计时**: 3秒倒计时准备，按空格可跳过
3. **游戏进行**: 控制蛇移动，吃食物得分
4. **暂停功能**: 随时按空格暂停/恢复
5. **游戏结束**: 碰撞后显示最终得分，5秒后自动返回

## 🛠️ 开发指南

### 调试模式
```javascript
// 浏览器控制台中可用的调试命令
window.debugGame.getScore()      // 获取当前分数
window.debugGame.getState()      // 获取游戏状态
window.debugGame.resetHighScore() // 重置最高分
window.debugGame.togglePause()   // 切换暂停状态
```

### 自定义配置
```javascript
// 在Game.js中可调整的参数
this.gridCount = 30;        // 网格数量
this.moveSpeed = 5;         // 移动速度（格/秒）
this.pointsPerFood = 20;    // 每个食物的分数
this.countdownTime = 3;     // 倒计时秒数
```

## 🐛 故障排除

### 常见问题

**Q: 游戏页面空白或无法加载？**
- A: 必须通过HTTP服务器访问，不能直接打开HTML文件
- A: 检查浏览器控制台是否有JavaScript错误

**Q: 键盘控制无响应？**
- A: 点击游戏画布区域确保其获得焦点
- A: 检查是否在正确的游戏状态下（PLAYING）

**Q: 最高分不保存？**
- A: 检查浏览器是否禁用了localStorage
- A: 在隐私/无痕模式下可能无法保存

**Q: 游戏卡在黑屏？**
- A: 这个问题已在v3.0中修复，确保使用最新版本

### 诊断步骤
1. 打开浏览器开发者工具（F12）
2. 查看Console标签页的错误信息
3. 检查Network标签页确认所有资源已加载
4. 访问`debug.html`页面进行详细诊断

## 🚧 已知限制

- 移动端触摸控制尚未实现
- 暂无音效和背景音乐
- 单人游戏模式，暂无多人对战

## 🔮 未来规划

### 短期计划
- 📱 移动端适配和触摸控制
- 🔊 音效系统和背景音乐
- 🎚️ 难度等级选择
- 🏆 更丰富的计分系统

### 长期愿景
- 🌐 在线排行榜
- 🎮 多人对战模式
- 🎨 主题和皮肤系统
- 📊 游戏数据统计

## 📜 开源许可

本项目采用 MIT 许可证开源，欢迎自由使用、修改和分发。

## 🙏 致谢

感谢所有测试用户的反馈，帮助我们发现并修复了关键的游戏bug，让这个项目变得更加完善。

---

**🎉 现在就开始游戏，挑战你的极限分数！**

> 💡 **提示**: 如果遇到问题，请查看`docs/项目诊断报告.md`获取详细的故障排除信息。 